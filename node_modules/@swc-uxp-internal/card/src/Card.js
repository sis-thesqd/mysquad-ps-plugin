"use strict";var p=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var i=(d,a,e,s)=>{for(var o=s>1?void 0:s?u(a,e):a,l=d.length-1,n;l>=0;l--)(n=d[l])&&(o=(s?n(a,e,o):n(o))||o);return s&&o&&p(a,e,o),o};import{html as t,SizedMixin as v,SpectrumElement as m}from"@spectrum-web-components/base";import{ifDefined as h}from"@spectrum-web-components/base/src/directives.js";import{property as r,query as g}from"@spectrum-web-components/base/src/decorators.js";import{FocusVisiblePolyfillMixin as f}from"@spectrum-web-components/shared/src/focus-visible.js";import{ObserveSlotPresence as b}from"@spectrum-web-components/shared/src/observe-slot-presence.js";import{LikeAnchor as y}from"@spectrum-web-components/shared/src/like-anchor.js";import"@spectrum-web-components/asset/sp-asset.js";import"@spectrum-web-components/checkbox/sp-checkbox.js";import"@spectrum-web-components/quick-actions/sp-quick-actions.js";import"@spectrum-web-components/divider/sp-divider.js";import w from"./card.css.js";import k from"@spectrum-web-components/styles/heading.js";import E from"@spectrum-web-components/styles/detail.js";export class Card extends y(v(b(f(m),['[slot="cover-photo"]','[slot="preview"]']),{validSizes:["s","m"]})){constructor(){super(...arguments);this.variant="standard";this._selected=!1;this.heading="";this.horizontal=!1;this.focused=!1;this.toggles=!1;this.value="";this.subheading="";this.handleFocusin=e=>{if(this.focused=!0,e.composedPath()[0]!==this){this.removeEventListener("keydown",this.handleKeydown);return}this.addEventListener("keydown",this.handleKeydown)}}static get styles(){return[k,E,w]}get selected(){return this._selected}set selected(e){e!==this.selected&&(this._selected=e,this.requestUpdate("selected",!this._selected))}get hasCoverPhoto(){return this.getSlotContentPresence('[slot="cover-photo"]')}get hasPreview(){return this.getSlotContentPresence('[slot="preview"]')}click(){var e;(e=this.likeAnchor)==null||e.click()}handleFocusout(e){this.focused=!1,e.composedPath()[0]===this&&this.removeEventListener("keydown",this.handleKeydown)}handleKeydown(e){const{code:s}=e;switch(s){case"Space":if(this.toggleSelected(),this.toggles){e.preventDefault();break}case"Enter":case"NumpadEnter":this.click()}}handleSelectedChange(e){e.stopPropagation(),this.selected=e.target.checked,this.announceChange()}toggleSelected(){if(!this.toggles){this.dispatchEvent(new Event("click",{bubbles:!0,composed:!0}));return}this.selected=!this.selected,this.announceChange()}announceChange(){this.dispatchEvent(new Event("change",{cancelable:!0,bubbles:!0,composed:!0}))||(this.selected=!this.selected)}stopPropagationOnHref(e){this.href&&e.stopPropagation()}handlePointerdown(e){if(e.composedPath().some(c=>c.localName==="a"))return;const l=+new Date,n=()=>{+new Date-l<200&&this.click(),this.removeEventListener("pointerup",n),this.removeEventListener("pointercancel",n)};this.addEventListener("pointerup",n),this.addEventListener("pointercancel",n)}get renderHeading(){return t`
            <div
                class="title spectrum-Heading spectrum-Heading--sizeXS"
                id="heading"
            >
                <slot name="heading">${this.heading}</slot>
            </div>
        `}get renderPreviewImage(){return t`
            <sp-asset id="preview" variant=${h(this.asset)}>
                <slot name="preview"></slot>
            </sp-asset>
            ${this.variant!=="quiet"&&!this.horizontal?t`
                      <sp-divider size="s"></sp-divider>
                  `:t``}
        `}get renderCoverImage(){return t`
            <sp-asset id="cover-photo" variant=${h(this.asset)}>
                <slot name="cover-photo"></slot>
            </sp-asset>
            ${this.variant!=="quiet"&&!this.horizontal?t`
                      <sp-divider size="s"></sp-divider>
                  `:t``}
        `}get images(){const e=[];return this.hasPreview&&e.push(this.renderPreviewImage),this.hasCoverPhoto&&e.push(this.renderCoverImage),e}renderImage(){return this.horizontal?this.images:this.variant!=="standard"?[this.renderPreviewImage]:this.images}get renderSubtitleAndDescription(){return t`
            <div class="subtitle spectrum-Detail spectrum-Detail--sizeS">
                <slot name="subheading">${this.subheading}</slot>
            </div>
            <slot name="description"></slot>
        `}render(){return t`
            ${this.renderImage()}
            <div class="body">
                <div class="header">
                    ${this.renderHeading}
                    ${this.variant==="gallery"?this.renderSubtitleAndDescription:t``}
                    ${this.variant!=="quiet"||this.size!=="s"?t`
                              <div
                                  class="action-button"
                                  @pointerdown=${this.stopPropagationOnHref}
                              >
                                  <slot name="actions"></slot>
                              </div>
                          `:t``}
                </div>
                ${this.variant!=="gallery"?t`
                          <div class="content">
                              ${this.renderSubtitleAndDescription}
                          </div>
                      `:t``}
            </div>
            ${this.href?this.renderAnchor({id:"like-anchor",labelledby:"heading"}):t``}
            ${this.variant==="standard"?t`
                      <slot name="footer"></slot>
                  `:t``}
            ${this.toggles?t`
                      <sp-quick-actions
                          class="quick-actions"
                          @pointerdown=${this.stopPropagationOnHref}
                      >
                          <sp-checkbox
                              class="checkbox"
                              @change=${this.handleSelectedChange}
                              ?checked=${this.selected}
                              tabindex="-1"
                          ></sp-checkbox>
                      </sp-quick-actions>
                  `:t``}
            ${this.variant==="quiet"&&this.size==="s"?t`
                      <sp-quick-actions
                          class="spectrum-QuickActions actions"
                          @pointerdown=${this.stopPropagationOnHref}
                      >
                          <slot name="actions"></slot>
                      </sp-quick-actions>
                  `:t``}
        `}firstUpdated(e){super.firstUpdated(e),this.addEventListener("pointerdown",this.handlePointerdown),this.addEventListener("focusin",this.handleFocusin),this.shadowRoot.addEventListener("focusin",this.handleFocusin),this.addEventListener("focusout",this.handleFocusout)}}i([r()],Card.prototype,"asset",2),i([r({reflect:!0})],Card.prototype,"variant",2),i([r({type:Boolean,reflect:!0})],Card.prototype,"selected",1),i([r()],Card.prototype,"heading",2),i([r({type:Boolean,reflect:!0})],Card.prototype,"horizontal",2),i([g("#like-anchor")],Card.prototype,"likeAnchor",2),i([r({type:Boolean,reflect:!0})],Card.prototype,"focused",2),i([r({type:Boolean,reflect:!0})],Card.prototype,"toggles",2),i([r()],Card.prototype,"value",2),i([r()],Card.prototype,"subheading",2);
//# sourceMappingURL=Card.js.map
